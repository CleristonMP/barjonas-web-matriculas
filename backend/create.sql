create table tb_address (id bigint generated by default as identity, complement varchar(255), created_at TIMESTAMP WITHOUT TIME ZONE, district varchar(255), number varchar(255), public_place varchar(255), updated_at TIMESTAMP WITHOUT TIME ZONE, zip_code varchar(255), county_id bigint, primary key (id));
create table tb_county (id bigint generated by default as identity, created_at TIMESTAMP WITHOUT TIME ZONE, name varchar(255), state varchar(255), updated_at TIMESTAMP WITHOUT TIME ZONE, primary key (id));
create table tb_parent (id bigint generated by default as identity, cpf varchar(255), created_at TIMESTAMP WITHOUT TIME ZONE, last_name varchar(255), name varchar(255), phone varchar(255), updated_at TIMESTAMP WITHOUT TIME ZONE, primary key (id));
create table tb_role (id bigint generated by default as identity, authority varchar(255), primary key (id));
create table tb_school_class (id bigint generated by default as identity, created_at TIMESTAMP WITHOUT TIME ZONE, name varchar(255), period varchar(255), updated_at TIMESTAMP WITHOUT TIME ZONE, primary key (id));
create table tb_student (id bigint generated by default as identity, birth_date TIMESTAMP WITHOUT TIME ZONE, cpf varchar(255), created_at TIMESTAMP WITHOUT TIME ZONE, enrollment integer, last_name varchar(255), name varchar(255), updated_at TIMESTAMP WITHOUT TIME ZONE, address_id bigint, parent_id bigint, school_class_id bigint, primary key (id));
create table tb_user (id bigint generated by default as identity, email varchar(255), last_name varchar(255), name varchar(255), password varchar(255), primary key (id));
create table tb_user_role (user_id bigint not null, role_id bigint not null, primary key (user_id, role_id));
alter table tb_user add constraint UK_4vih17mube9j7cqyjlfbcrk4m unique (email);
alter table tb_address add constraint FK6vujofkk77gpf1cnok139q3j2 foreign key (county_id) references tb_county;
alter table tb_student add constraint FKgw5dx54atjkl6a9o1wctoicw3 foreign key (address_id) references tb_address;
alter table tb_student add constraint FK5rwgx80xgcppy0tia13erq4l3 foreign key (parent_id) references tb_parent;
alter table tb_student add constraint FK2r3evncag5a6ysgixdp3gnler foreign key (school_class_id) references tb_school_class;
alter table tb_user_role add constraint FKea2ootw6b6bb0xt3ptl28bymv foreign key (role_id) references tb_role;
alter table tb_user_role add constraint FK7vn3h53d0tqdimm8cp45gc0kl foreign key (user_id) references tb_user;
